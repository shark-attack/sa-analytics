{"version":3,"sources":["sa-channel-performance.es6"],"names":[],"mappings":"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","file":"sa-channel-performance.js","sourcesContent":["class SAChannelPerformance extends HTMLElement {\n    setProperties() {\n        this.uri = '';\n    };\n\n    /**\n     * load data\n     */\n    loadData() {\n        var xhr = new XMLHttpRequest();\n        xhr.addEventListener('load', () => {\n            var data = JSON.parse(xhr.response);\n            this.createChannelViews(data);\n        });\n        xhr.open(\"get\", this.uri, true);\n        xhr.send();\n    };\n\n    /**\n     * create channel views\n     * @param data\n     */\n    createChannelViews(data) {\n        var channels = [];\n        for (var c in data) {\n            data[c].id = c;\n            channels.push(data[c]);\n        }\n\n        this.channels = channels.sort(function(a,b) { if (a.assetsperday > b.assetsperday) { return -1; } else { return 1 }});\n\n        var snapshotcount = 4;\n        if (snapshotcount > this.channels.length) {\n            snapshotcount = this.channels.length;\n        }\n        var bestperformers = this.channels.slice(0, snapshotcount);\n        var worstperformers = this.channels.slice(this.channels.length-snapshotcount, this.channels.length);\n\n        this.bigview = this.createHeaderView(this.channels[0]);\n        this.headercontainer.appendChild(this.bigview);\n\n        for (var c = 0; c < bestperformers.length; c++) {\n            var bch = this.createChannelView(bestperformers[c]);\n            bch.setAttribute('data-channelid', bestperformers[c].id);\n            bch.addEventListener('click', (event) => { this.onChannelClick(event); });\n            this.bestcontainer.appendChild(bch);\n        }\n\n        for (var c = 0; c < worstperformers.length; c++) {\n            var wch = this.createChannelView(worstperformers[c]);\n            wch.setAttribute('data-channelid', worstperformers[c].id);\n            wch.addEventListener('click', (event) => { this.onChannelClick(event); });\n            this.worstcontainer.appendChild(wch);\n        }\n\n        for (var c = 0; c < this.channels.length; c++) {\n            var ch = document.createElement('div');\n            ch.setAttribute('data-channelid', this.channels[c].id);\n            ch.className = 'compact-channel';\n            ch.innerHTML = '<h1>' +  this.channels[c].label + '</h1><span class=\"apd\">' + parseFloat(this.channels[c].assetsperday).toPrecision(2) + '</span>&nbsp;<span>assets per day</span>';\n            ch.addEventListener('click', (event) => { this.onChannelClick(event); });\n            this.allchannels.appendChild(ch);\n        }\n    };\n\n    /**\n     * creates a channel view elem based on data\n     * @param view\n     * @returns {Element}\n     */\n    createChannelView(view) {\n        var ch = document.createElement('sa-channel-view');\n        ch.setAttribute('resolution', 7);\n        ch.setAttribute('daystolookback', 30);\n        ch.setAttribute('activedays', view.daysactive);\n        ch.setAttribute('assetsperday', view.assetsperday);\n        ch.setAttribute('label', view.label);\n        ch.setAttribute('activity', view.timestamps);\n        ch.setAttribute('barcolor', '#7bbedd');\n        return ch;\n    };\n\n    /**\n     * creates a header view elem based on data\n     * @param view\n     * @returns {Element}\n     */\n    createHeaderView(view) {\n        var ch = document.createElement('sa-channel-view');\n        ch.setAttribute('resolution', 14);\n        ch.setAttribute('daystolookback', 365);\n        ch.setAttribute('activedays', view.daysactive);\n        ch.setAttribute('assetsperday', view.assetsperday);\n        ch.setAttribute('label', view.label);\n        ch.setAttribute('activity', view.timestamps);\n        ch.setAttribute('barcolor', '#7bbedd');\n        return ch;\n    };\n\n    /**\n     * channel click handler\n     * @param event\n     */\n    onChannelClick(event) {\n        var id = event.currentTarget.getAttribute('data-channelid');\n        if (this.bigview.parentNode) {\n            this.headercontainer.removeChild(this.bigview);\n        }\n        for (var c = 0; c < this.channels.length; c++) {\n            if (this.channels[c].id === id) {\n                this.bigview = this.createHeaderView(this.channels[c]);\n                this.headercontainer.appendChild(this.bigview)\n            }\n        }\n    };\n\n    /**\n     * parse attributes on element\n     */\n    parseAttributes() {\n        if (this.hasAttribute('uri')) {\n            this.uri = this.getAttribute('uri');\n        }\n\n    };\n\n    // Fires when an instance of the element is created.\n    createdCallback() {\n        this.setProperties();\n        this.parseAttributes();\n    };\n\n    // Fires when an instance was inserted into the document.\n    attachedCallback() {\n        let template = this.owner.querySelector('template');\n        this.root = this.createShadowRoot();\n        let clone = document.importNode(template.content, true);\n        this.root.appendChild(clone);\n        this.bestcontainer = this.root.querySelector('.top-channels');\n        this.worstcontainer = this.root.querySelector('.bottom-channels');\n        this.allchannels = this.root.querySelector('.all-channels');\n        this.headercontainer = this.root.querySelector('.header');\n        this.loadData();\n    }\n\n\n    // Fires when an instance was removed from the document.\n    detachedCallback() {};\n\n    // Fires when an attribute was added, removed, or updated.\n    attributeChangedCallback(attr, oldVal, newVal) {};\n\n}\n\nSAChannelPerformance.prototype.owner = (document._currentScript || document.currentScript).ownerDocument;\ndocument.registerElement('sa-channel-performance', SAChannelPerformance);\n"],"sourceRoot":"/source/"}